<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Data</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<div class="container-fluid main-container">

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->



<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = false;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">PLB DSS Analysis</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa fa fa-home"></span>
     
    About
  </a>
</li>
<li>
  <a href="Analysis1.html">
    <span class="fa fa fa fa-table"></span>
     
    Model Evaluation
  </a>
</li>
<li>
  <a href="code.html">
    <span class="fa fa fa fa-file-code-o"></span>
     
    Codes
  </a>
</li>
<li>
  <a href="manuscript.html">
    <span class="fa fa fa fa-file-text-o"></span>
     
    Manuscript
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mladencucak/AnalysisPLBIreland">
    <span class="fa fa-github-square"></span>
     
    source
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Data</h1>

</div>


<div id="introduction" class="section level2">
<h2>Introduction</h2>
</div>
<div id="libraries" class="section level2">
<h2>Libraries</h2>
<p>Packages needed for the nalysis are loaded. If the libraries do not exist locally, they will be downloaded.</p>
<pre class="r"><code>list.of.packages &lt;-
  c(
    &quot;tidyverse&quot;,
    &quot;data.table&quot;,
    &quot;ggplot2&quot;,
    &quot;knitr&quot;,
    &quot;zoo&quot;,
    &quot;imputeTS&quot;,
    &quot;scales&quot;,
    &quot;padr&quot;,
    &quot;readxl&quot;,
    &quot;stringr&quot;,
    &quot;lubridate&quot;,
    &quot;readr&quot;,
    &quot;egg&quot;
  )

new.packages &lt;- list.of.packages[!(list.of.packages %in% installed.packages()[,&quot;Package&quot;])]

#Download packages that are not already present
if(length(new.packages)) install.packages(new.packages)

packages_load &lt;-lapply(list.of.packages, require, character.only = TRUE)

#Print warning if there is a problem with installing/loading some of packages
if (any(as.numeric(packages_load)==0)){
  warning(paste(&quot;Package/s&quot;, paste(list.of.packages[packages_load != TRUE]), &quot;not loaded!&quot;))
}else {
  print(&quot;All packages were succesfully loaded.&quot;)
}</code></pre>
<pre><code>## [1] &quot;All packages were succesfully loaded.&quot;</code></pre>
<pre class="r"><code>rm(list.of.packages, new.packages)</code></pre>
</div>
<div id="data" class="section level2">
<h2>Data</h2>
<div id="weather-data" class="section level3">
<h3>Weather Data</h3>
<p>Historical weather data from a Met Éireann Oak Park synoptic weather station was used for model evaluation. The trial sites were in the radius of up to 500 m from the station in all years.</p>
<pre class="r"><code>#Weather data, parameters and cut off dates
load(file=&quot;data/OP_2007-2016.RData&quot;)
OP[1:5,1:20]</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["date"],"name":[1],"type":["S3: POSIXct"],"align":["right"]},{"label":["short_date"],"name":[2],"type":["date"],"align":["right"]},{"label":["year"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["month"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["day"],"name":[5],"type":["int"],"align":["right"]},{"label":["i_rain"],"name":[6],"type":["int"],"align":["right"]},{"label":["rain"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["i_temp"],"name":[8],"type":["int"],"align":["right"]},{"label":["temp"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["i_wetb"],"name":[10],"type":["int"],"align":["right"]},{"label":["wetb"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["dewpt"],"name":[12],"type":["dbl"],"align":["right"]},{"label":["vappr"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["i_rhum"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["rhum"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["msl"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["i_wdsp"],"name":[17],"type":["int"],"align":["right"]},{"label":["wdsp"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["i_wddir"],"name":[19],"type":["int"],"align":["right"]},{"label":["wddir"],"name":[20],"type":["dbl"],"align":["right"]}],"data":[{"1":"2007-01-01 00:00:00","2":"2007-01-01","3":"2007","4":"1","5":"1","6":"0","7":"0.2","8":"0","9":"4.8","10":"0","11":"4.1","12":"3.0","13":"7.6","14":"0","15":"87","16":"1006.9","17":"2","18":"11","19":"2","20":"250","_rn_":"2399002"},{"1":"2007-01-01 01:00:00","2":"2007-01-01","3":"2007","4":"1","5":"1","6":"0","7":"0.0","8":"0","9":"5.4","10":"0","11":"4.4","12":"3.0","13":"7.6","14":"0","15":"84","16":"1007.6","17":"2","18":"7","19":"2","20":"240","_rn_":"2399003"},{"1":"2007-01-01 02:00:00","2":"2007-01-01","3":"2007","4":"1","5":"1","6":"0","7":"0.0","8":"0","9":"5.8","10":"0","11":"4.7","12":"3.2","13":"7.7","14":"0","15":"83","16":"1008.4","17":"2","18":"6","19":"2","20":"250","_rn_":"2399004"},{"1":"2007-01-01 03:00:00","2":"2007-01-01","3":"2007","4":"1","5":"1","6":"0","7":"0.1","8":"0","9":"5.2","10":"0","11":"4.3","12":"2.8","13":"7.5","14":"0","15":"84","16":"1009.7","17":"2","18":"15","19":"2","20":"260","_rn_":"2399005"},{"1":"2007-01-01 04:00:00","2":"2007-01-01","3":"2007","4":"1","5":"1","6":"0","7":"0.0","8":"0","9":"5.6","10":"0","11":"4.2","12":"2.3","13":"7.2","14":"0","15":"79","16":"1010.9","17":"2","18":"15","19":"2","20":"260","_rn_":"2399006"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>colnames(OP)[which(names(OP) == &quot;year&quot;)] &lt;- &quot;year_var&quot;
OP &lt;- add_column(OP, week_var =data.table::week(OP$date), .before = &quot;i_rain&quot; )
OP &lt;- add_column(OP, doy = data.table::yday(OP$date), .before = &quot;i_rain&quot; )</code></pre>
<p>Subset the data to exclude the months of the year which we do not need for the analysis.</p>
<pre class="r"><code>OP &lt;- subset(OP, month &gt;3 &amp; month &lt; 10)</code></pre>
<p>Remove the variables we dont need for the analysis, to make some speed gains.</p>
<p>Get summary of missing values for the variables of interest.</p>
<pre class="r"><code>OP %&gt;% group_by( year_var)  %&gt;%
  summarize(NA_rain = sum(is.na(rain)),
            NA_temp = sum(is.na(temp)),
            NA_rhum = sum(is.na(rhum)))</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["year_var"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["NA_rain"],"name":[2],"type":["int"],"align":["right"]},{"label":["NA_temp"],"name":[3],"type":["int"],"align":["right"]},{"label":["NA_rhum"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"2007","2":"0","3":"0","4":"0"},{"1":"2008","2":"0","3":"0","4":"0"},{"1":"2009","2":"6","3":"6","4":"6"},{"1":"2010","2":"0","3":"0","4":"0"},{"1":"2011","2":"0","3":"0","4":"0"},{"1":"2012","2":"0","3":"0","4":"0"},{"1":"2013","2":"0","3":"0","4":"0"},{"1":"2014","2":"0","3":"0","4":"1"},{"1":"2015","2":"0","3":"0","4":"0"},{"1":"2016","2":"0","3":"0","4":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Missing value imputation with qbic spline function works well up to 8 consecutive values, for variables that have some seasonal frequency, temperature and relative humidity in our case.</p>
<pre class="r"><code>infil_gap &lt;- 8 #Maximum length of the infill gap
OP$temp &lt;- round(na.spline(OP$temp, na.rm = FALSE, maxgap = infil_gap),1)
OP$rhum &lt;- round(na.spline(OP$rhum, na.rm = FALSE, maxgap = infil_gap),0)
OP$rhum  &lt;- sapply(OP$rhum, function(x) ifelse(x&gt;100, x&lt;-100, x))
#Check if the imputation worked
OP %&gt;% group_by( year_var)  %&gt;%
  summarize(NA_rain = sum(is.na(rain)),
            NA_temp = sum(is.na(temp)),
            NA_rhum = sum(is.na(rhum)))</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["year_var"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["NA_rain"],"name":[2],"type":["int"],"align":["right"]},{"label":["NA_temp"],"name":[3],"type":["int"],"align":["right"]},{"label":["NA_rhum"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"2007","2":"0","3":"0","4":"0"},{"1":"2008","2":"0","3":"0","4":"0"},{"1":"2009","2":"6","3":"0","4":"0"},{"1":"2010","2":"0","3":"0","4":"0"},{"1":"2011","2":"0","3":"0","4":"0"},{"1":"2012","2":"0","3":"0","4":"0"},{"1":"2013","2":"0","3":"0","4":"0"},{"1":"2014","2":"0","3":"0","4":"0"},{"1":"2015","2":"0","3":"0","4":"0"},{"1":"2016","2":"0","3":"0","4":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Rain is somewhat harder to impute but there are ways around this problem, especially when there is only a few values missing. Since rain data is required only in certain rare situations, which are defined within the model, we can use the same conditions to impute these missing values. We are certain that rain is irelevant if relative humidity is below 88% and temperature of 8C, and these values can then be replaced with 0.</p>
<pre class="r"><code>OP[is.na(OP$rain),]$rain&lt;- with(OP[is.na(OP$rain),],ifelse(rhum&lt;88|temp&lt;8, 0, rain))
OP %&gt;% group_by( year_var)  %&gt;%
  summarize(NA_rain = sum(is.na(rain)),
            NA_temp = sum(is.na(temp)),
            NA_rhum = sum(is.na(rhum)))</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["year_var"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["NA_rain"],"name":[2],"type":["int"],"align":["right"]},{"label":["NA_temp"],"name":[3],"type":["int"],"align":["right"]},{"label":["NA_rhum"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"2007","2":"0","3":"0","4":"0"},{"1":"2008","2":"0","3":"0","4":"0"},{"1":"2009","2":"0","3":"0","4":"0"},{"1":"2010","2":"0","3":"0","4":"0"},{"1":"2011","2":"0","3":"0","4":"0"},{"1":"2012","2":"0","3":"0","4":"0"},{"1":"2013","2":"0","3":"0","4":"0"},{"1":"2014","2":"0","3":"0","4":"0"},{"1":"2015","2":"0","3":"0","4":"0"},{"1":"2016","2":"0","3":"0","4":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div id="the-analysis" class="section level2">
<h2>The analysis</h2>
<p>The set of main parameters of Irish rules model is evaluated. The csv sheet with parameters under evaluation is avaialbe in data folder and can be changed and used for model evaluation in other locations. Coulnd named <code>risk_11111</code> represents set of the original model parameters.</p>
<pre class="r"><code>#read in parameters
par &lt;- read_csv(paste0(&quot;./data/parameters.csv&quot;), skip = 10)
par$param_set &lt;-stringi::stri_replace_all_fixed(par$param_set, &quot;\t&quot;, &quot;&quot;)
par</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["param_set"],"name":[1],"type":["chr"],"align":["left"]},{"label":["rh_thresh"],"name":[2],"type":["int"],"align":["right"]},{"label":["temp_thres"],"name":[3],"type":["int"],"align":["right"]},{"label":["hours"],"name":[4],"type":["int"],"align":["right"]},{"label":["wet_before"],"name":[5],"type":["int"],"align":["right"]},{"label":["wet_after"],"name":[6],"type":["int"],"align":["right"]},{"label":["lw_rh"],"name":[7],"type":["int"],"align":["right"]},{"label":["X8"],"name":[8],"type":["chr"],"align":["left"]},{"label":["X9"],"name":[9],"type":["chr"],"align":["left"]},{"label":["X10"],"name":[10],"type":["chr"],"align":["left"]},{"label":["X11"],"name":[11],"type":["chr"],"align":["left"]}],"data":[{"1":"risk_11111","2":"90","3":"10","4":"12","5":"3","6":"3","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_12111","2":"90","3":"8","4":"12","5":"3","6":"3","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_12211","2":"90","3":"8","4":"10","5":"3","6":"3","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_11211","2":"90","3":"10","4":"10","5":"3","6":"3","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_21111","2":"88","3":"10","4":"12","5":"3","6":"3","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_22111","2":"88","3":"8","4":"12","5":"3","6":"3","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_22211","2":"88","3":"8","4":"10","5":"3","6":"3","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_21211","2":"88","3":"10","4":"10","5":"3","6":"3","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_11121","2":"90","3":"10","4":"12","5":"5","6":"3","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_12121","2":"90","3":"8","4":"12","5":"5","6":"3","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_12221","2":"90","3":"8","4":"10","5":"5","6":"3","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_11221","2":"90","3":"10","4":"10","5":"5","6":"3","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_21121","2":"88","3":"10","4":"12","5":"5","6":"3","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_22121","2":"88","3":"8","4":"12","5":"5","6":"3","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_22221","2":"88","3":"8","4":"10","5":"5","6":"3","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_21221","2":"88","3":"10","4":"10","5":"5","6":"3","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_11131","2":"90","3":"10","4":"12","5":"0","6":"4","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_12131","2":"90","3":"8","4":"12","5":"0","6":"4","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_12231","2":"90","3":"8","4":"10","5":"0","6":"4","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_11231","2":"90","3":"10","4":"10","5":"0","6":"4","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_21131","2":"88","3":"10","4":"12","5":"0","6":"4","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_22131","2":"88","3":"8","4":"12","5":"0","6":"4","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_22231","2":"88","3":"8","4":"10","5":"0","6":"4","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_21231","2":"88","3":"10","4":"10","5":"0","6":"4","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_11112","2":"90","3":"10","4":"12","5":"3","6":"3","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_12112","2":"90","3":"8","4":"12","5":"3","6":"3","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_12212","2":"90","3":"8","4":"10","5":"3","6":"3","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_11212","2":"90","3":"10","4":"10","5":"3","6":"3","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_21112","2":"88","3":"10","4":"12","5":"3","6":"3","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_22112","2":"88","3":"8","4":"12","5":"3","6":"3","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_22212","2":"88","3":"8","4":"10","5":"3","6":"3","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_21212","2":"88","3":"10","4":"10","5":"3","6":"3","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_11122","2":"90","3":"10","4":"12","5":"5","6":"3","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_12122","2":"90","3":"8","4":"12","5":"5","6":"3","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_12222","2":"90","3":"8","4":"10","5":"5","6":"3","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_11222","2":"90","3":"10","4":"10","5":"5","6":"3","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_21122","2":"88","3":"10","4":"12","5":"5","6":"3","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_22122","2":"88","3":"8","4":"12","5":"5","6":"3","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_22222","2":"88","3":"8","4":"10","5":"5","6":"3","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_21222","2":"88","3":"10","4":"10","5":"5","6":"3","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_11132","2":"90","3":"10","4":"12","5":"0","6":"4","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_12132","2":"90","3":"8","4":"12","5":"0","6":"4","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_12232","2":"90","3":"8","4":"10","5":"0","6":"4","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_11232","2":"90","3":"10","4":"10","5":"0","6":"4","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_21132","2":"88","3":"10","4":"12","5":"0","6":"4","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_22132","2":"88","3":"8","4":"12","5":"0","6":"4","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_22232","2":"88","3":"8","4":"10","5":"0","6":"4","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"},{"1":"risk_21232","2":"88","3":"10","4":"10","5":"0","6":"4","7":"90","8":"NA","9":"NA","10":"NA","11":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div id="the-model" class="section level3">
<h3>The model</h3>
<p>Implementation of the model</p>
<pre class="r"><code>IrishRulesModel &lt;-function(data, param = NULL){
  # Parameter list
  if (is.null(param)){
    rh_thresh &lt;- 90
    temp_thres &lt;- 10
    hours &lt;- 12   #sum of hours before EBH accumulation
    wet_before &lt;- 3
    wet_after &lt;- 3
  }else{
    #pass a vector of parameters 
    rh_thresh &lt;- as.numeric(param[2])
    temp_thres &lt;- as.numeric(param[3])
    hours &lt;- as.numeric(param[4])   
    wet_before &lt;- as.numeric(param[5])
    wet_after &lt;- as.numeric(param[6])
    lw_rhum &lt;- param[7]           #if is NA then only rain data will be used
  }
  
  data  %&gt;% collect  %&gt;% .[[&quot;rain&quot;]] -&gt; rain
  data  %&gt;% collect  %&gt;% .[[&quot;rhum&quot;]] -&gt; rh
  data  %&gt;% collect  %&gt;% .[[&quot;temp&quot;]] -&gt; temp
  if(sum(is.na(with(data, rain, temp,rhum)))&gt;5){
    stop(print(&quot;sum of NAs is more than 5&quot;))
  }
  
  #&quot;Out of boounds&quot;
  rain &lt;- c(rain, rep(0,20))
  temp &lt;- c(temp, rep(0,20))
  rh &lt;- c(rh, rep(0,20))
  
  rain &lt;- na.approx(rain, maxgap = 5)
  temp &lt;- na.approx(temp, maxgap = 5)
  rh &lt;- na.approx(rh, maxgap = 5)
  # rain &lt;- as.vector(data[,9])
  # temp &lt;- data[,6]
  # rh &lt;- data[,7]
  # class(temp)
  # check if there is 12 hours of conditions: rh &gt;= 90 and t&gt;= 10
  criteria&lt;- as.numeric(temp&gt;=temp_thres &amp; rh&gt;=rh_thresh) #Specify criteria&gt; data$crit
  
  #cumulative sum with restart at zero
  #criteria_sum &lt;-  ave(criteria, cumsum(criteria == 0), FUN = cumsum)
  #data$rs33 &lt;- with(rle(data$rs1!=0), sequence(lengths)*rep(values, lengths))
  criteria_sum &lt;- ave(coalesce(criteria, 0), data.table::rleid(zoo::na.locf(criteria != 0,maxgap = 3)), FUN = cumsum)
  
  
  #cumulative sum with restart at zero
  # criteria_sum &lt;-  ave(criteria, cumsum(criteria == 0), FUN = cumsum)
  #data$rs33 &lt;- with(rle(data$rs1!=0), sequence(lengths)*rep(values, lengths))
  risk &lt;- rep(0, length(temp))
  
  criteria_met12  &lt;-as.numeric( criteria_sum &gt;= hours )
  idx             &lt;-which(criteria_sum == hours)
  
  
  #If there are no accumulations return vector with zeros
  if (sum(criteria_sum == hours)==0){                #breaks the loop if there is no initial accumulation of 12 hours
    head(risk,-20)
    } else{
        for (j in 1 : length(idx)){   
       
          #switch that looks if there was wetness: first rain, then both rain and rh, if rh exists
          if(if (is.na(lw_rhum)){                                            #if thee is no input for rhum threshold
            (sum(rain[(idx[j]-wet_before):(idx[j]+wet_after)])&gt;= 0.1)           #just see rain sum
          }else{
            any((any(rh[(idx[j]-wet_before):(idx[j]+wet_after)]&gt;= lw_rhum)) |   #take both as possible switches
                (sum(rain[(idx[j]-wet_before):(idx[j]+wet_after)])&gt;= 0.1))   
          }) # outputs true or false
          {         
            n &lt;- idx[j]        #start accumulation from 12th hour
          } else {         
            n &lt;- idx[j]+4      #start accumulation from 16th hour
          }    
          s &lt;- criteria_met12[n]
          # if a break of less than or equal to 5 hours  
          m &lt;- n-1;
          while (s==1)
          { 
            risk[n] &lt;- risk[m]+1  
            n &lt;- n+1;
            m &lt;- n-1;
            s &lt;- criteria[n] 
            if ( s==0 &amp;&amp; (criteria[n+2]==1)) {
              n = n+2;
              s=1;
            } else if ( s==0 &amp;&amp; (criteria[n+3]==1)) {
              n = n+3;
              s=1;
            } else if ( s==0 &amp;&amp; (criteria[n+4]==1)) {
              n = n+4;
              s=1;
            } else if( s==0 &amp;&amp; (criteria[n+5]==1)) {
              n = n+5;
              s=1;
            }      
          }  
          
      }   
      head(risk,-20) #remove last 20 values that were added to vectors to prevent &quot;Out of bounds&quot; issue
    
    }
  
}</code></pre>
</div>
<div id="model-run" class="section level3">
<h3>Model Run</h3>
<p>The model is run for each set of parameters, and columns with model outputs are attached to weather data frame. Names of new columns corespond to the set of parameters supplied.</p>
<pre class="r"><code>for(i in 1:nrow(par) ){
  loop_var &lt;- apply(par[i,],1, function(x) {
    k &lt;- lapply(split(OP, factor(OP$year)), function(chunk)  IrishRulesModel(chunk, x)) #get the list of outpus
    unlist(k) -&gt; k  #make it a vector
  })
  OP[,ncol(OP)+1] &lt;-  as.numeric(loop_var)
  rm(loop_var)
  names(OP)[ncol(OP)] &lt;- paste0(par[i,1]) #asign the name
}

nn &lt;- paste0(names(OP[,26:73]), &quot;_ebh&quot;,&quot;&quot;)
names(OP[,26:73]) &lt;-  nn
setnames(OP, old = c(names(OP[,26:73])), new = nn)
rm(i,nn)
# Sample of outputs
head(OP[, c(1,7,9,15,24:30)],5)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["date"],"name":[1],"type":["S3: POSIXct"],"align":["right"]},{"label":["doy"],"name":[2],"type":["int"],"align":["right"]},{"label":["rain"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["vappr"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["stna"],"name":[5],"type":["fctr"],"align":["left"]},{"label":["sol_rad"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["risk_11111_ebh"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["risk_12111_ebh"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["risk_12211_ebh"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["risk_11211_ebh"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["risk_21111_ebh"],"name":[11],"type":["dbl"],"align":["right"]}],"data":[{"1":"2007-04-01 00:00:00","2":"91","3":"0","4":"8.0","5":"Oak_Park","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","_rn_":"2401162"},{"1":"2007-04-01 01:00:00","2":"91","3":"0","4":"7.9","5":"Oak_Park","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","_rn_":"2401163"},{"1":"2007-04-01 02:00:00","2":"91","3":"0","4":"7.9","5":"Oak_Park","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","_rn_":"2401164"},{"1":"2007-04-01 03:00:00","2":"91","3":"0","4":"7.6","5":"Oak_Park","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","_rn_":"2401165"},{"1":"2007-04-01 04:00:00","2":"91","3":"0","4":"7.2","5":"Oak_Park","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","_rn_":"2401166"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div id="section" class="section level2">
<h2></h2>
<pre class="r"><code>#Get subsets of data  for period before the epidemics were initiated
dates_cut &lt;-  read_csv(&quot;./data/plantingdates.csv&quot;, col_types = cols(disease_observed_sus = col_date(format = &quot;%d/%m/%Y&quot;),
                                                          last_assessment = col_date(format = &quot;%d/%m/%Y&quot;),
                                                          disease_observed_res = col_date(format = &quot;%d/%m/%Y&quot;),
                                                          disease_observed_setanta = col_date(format = &quot;%d/%m/%Y&quot;)))
dates_cut$planting_date &lt;- as.Date(dates_cut$planting_date, format = &quot;%d/%m/%Y&quot;)
dates_cut$emergence &lt;- as.Date(dates_cut$planting_date) + 21
dates_cut</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["year"],"name":[1],"type":["int"],"align":["right"]},{"label":["planting_date"],"name":[2],"type":["date"],"align":["right"]},{"label":["emergence"],"name":[3],"type":["date"],"align":["right"]},{"label":["disease_observed_sus"],"name":[4],"type":["date"],"align":["right"]},{"label":["disease_observed_res"],"name":[5],"type":["date"],"align":["right"]},{"label":["disease_observed_setanta"],"name":[6],"type":["date"],"align":["right"]},{"label":["last_assessment"],"name":[7],"type":["date"],"align":["right"]}],"data":[{"1":"2007","2":"2007-04-03","3":"2007-04-24","4":"2007-06-30","5":"2007-07-19","6":"2007-07-19","7":"2007-08-23"},{"1":"2008","2":"2008-04-07","3":"2008-04-28","4":"2008-07-02","5":"2008-07-15","6":"2008-07-09","7":"2008-08-13"},{"1":"2009","2":"2009-04-21","3":"2009-05-12","4":"2009-07-06","5":"2009-07-27","6":"2009-07-13","7":"2009-08-08"},{"1":"2010","2":"2010-05-04","3":"2010-05-25","4":"2010-07-19","5":"2010-08-02","6":"2010-07-19","7":"2010-08-30"},{"1":"2011","2":"2011-05-06","3":"2011-05-27","4":"2011-07-28","5":"2011-08-11","6":"2011-08-11","7":"2011-08-25"},{"1":"2012","2":"2012-05-28","3":"2012-06-18","4":"2012-07-13","5":"2012-07-19","6":"2012-07-13","7":"2012-08-28"},{"1":"2013","2":"2013-06-03","3":"2013-06-24","4":"2013-08-23","5":"2013-09-05","6":"2013-09-05","7":"2013-09-20"},{"1":"2014","2":"2014-05-23","3":"2014-06-13","4":"2014-08-01","5":"2014-08-14","6":"2014-08-22","7":"2014-09-11"},{"1":"2015","2":"2015-05-22","3":"2015-06-12","4":"2015-07-31","5":"2015-09-09","6":"2015-08-13","7":"2015-09-18"},{"1":"2016","2":"2016-05-31","3":"2016-06-21","4":"2016-07-22","5":"2016-09-09","6":"2016-08-05","7":"2016-09-16"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="description-of-variables" class="section level2">
<h2>Description of variables</h2>
<ul>
<li>Variable1:</li>
<li>Description</li>
<li>Type: character</li>
<li><p>Unit</p></li>
<li>Variable2:</li>
<li>Description</li>
<li>Type: integer</li>
<li><p>Unit</p></li>
<li>Variable3:</li>
<li>Description</li>
<li>Type: double</li>
<li><p>Unit:</p></li>
</ul>
</div>
<div id="quick-view" class="section level2">
<h2>Quick view</h2>
<pre class="r"><code>data</code></pre>
<pre><code>## function (..., list = character(), package = NULL, lib.loc = NULL, 
##     verbose = getOption(&quot;verbose&quot;), envir = .GlobalEnv) 
## {
##     fileExt &lt;- function(x) {
##         db &lt;- grepl(&quot;\\.[^.]+\\.(gz|bz2|xz)$&quot;, x)
##         ans &lt;- sub(&quot;.*\\.&quot;, &quot;&quot;, x)
##         ans[db] &lt;- sub(&quot;.*\\.([^.]+\\.)(gz|bz2|xz)$&quot;, &quot;\\1\\2&quot;, 
##             x[db])
##         ans
##     }
##     names &lt;- c(as.character(substitute(list(...))[-1L]), list)
##     if (!is.null(package)) {
##         if (!is.character(package)) 
##             stop(&quot;&#39;package&#39; must be a character string or NULL&quot;)
##         if (any(package %in% &quot;base&quot;)) 
##             warning(&quot;datasets have been moved from package &#39;base&#39; to package &#39;datasets&#39;&quot;)
##         if (any(package %in% &quot;stats&quot;)) 
##             warning(&quot;datasets have been moved from package &#39;stats&#39; to package &#39;datasets&#39;&quot;)
##         package[package %in% c(&quot;base&quot;, &quot;stats&quot;)] &lt;- &quot;datasets&quot;
##     }
##     paths &lt;- find.package(package, lib.loc, verbose = verbose)
##     if (is.null(lib.loc)) 
##         paths &lt;- c(path.package(package, TRUE), if (!length(package)) getwd(), 
##             paths)
##     paths &lt;- unique(normalizePath(paths[file.exists(paths)]))
##     paths &lt;- paths[dir.exists(file.path(paths, &quot;data&quot;))]
##     dataExts &lt;- tools:::.make_file_exts(&quot;data&quot;)
##     if (length(names) == 0L) {
##         db &lt;- matrix(character(), nrow = 0L, ncol = 4L)
##         for (path in paths) {
##             entries &lt;- NULL
##             packageName &lt;- if (file_test(&quot;-f&quot;, file.path(path, 
##                 &quot;DESCRIPTION&quot;))) 
##                 basename(path)
##             else &quot;.&quot;
##             if (file_test(&quot;-f&quot;, INDEX &lt;- file.path(path, &quot;Meta&quot;, 
##                 &quot;data.rds&quot;))) {
##                 entries &lt;- readRDS(INDEX)
##             }
##             else {
##                 dataDir &lt;- file.path(path, &quot;data&quot;)
##                 entries &lt;- tools::list_files_with_type(dataDir, 
##                   &quot;data&quot;)
##                 if (length(entries)) {
##                   entries &lt;- unique(tools::file_path_sans_ext(basename(entries)))
##                   entries &lt;- cbind(entries, &quot;&quot;)
##                 }
##             }
##             if (NROW(entries)) {
##                 if (is.matrix(entries) &amp;&amp; ncol(entries) == 2L) 
##                   db &lt;- rbind(db, cbind(packageName, dirname(path), 
##                     entries))
##                 else warning(gettextf(&quot;data index for package %s is invalid and will be ignored&quot;, 
##                   sQuote(packageName)), domain = NA, call. = FALSE)
##             }
##         }
##         colnames(db) &lt;- c(&quot;Package&quot;, &quot;LibPath&quot;, &quot;Item&quot;, &quot;Title&quot;)
##         footer &lt;- if (missing(package)) 
##             paste0(&quot;Use &quot;, sQuote(paste(&quot;data(package =&quot;, &quot;.packages(all.available = TRUE))&quot;)), 
##                 &quot;\n&quot;, &quot;to list the data sets in all *available* packages.&quot;)
##         else NULL
##         y &lt;- list(title = &quot;Data sets&quot;, header = NULL, results = db, 
##             footer = footer)
##         class(y) &lt;- &quot;packageIQR&quot;
##         return(y)
##     }
##     paths &lt;- file.path(paths, &quot;data&quot;)
##     for (name in names) {
##         found &lt;- FALSE
##         for (p in paths) {
##             if (file_test(&quot;-f&quot;, file.path(p, &quot;Rdata.rds&quot;))) {
##                 rds &lt;- readRDS(file.path(p, &quot;Rdata.rds&quot;))
##                 if (name %in% names(rds)) {
##                   found &lt;- TRUE
##                   if (verbose) 
##                     message(sprintf(&quot;name=%s:\t found in Rdata.rds&quot;, 
##                       name), domain = NA)
##                   thispkg &lt;- sub(&quot;.*/([^/]*)/data$&quot;, &quot;\\1&quot;, p)
##                   thispkg &lt;- sub(&quot;_.*$&quot;, &quot;&quot;, thispkg)
##                   thispkg &lt;- paste0(&quot;package:&quot;, thispkg)
##                   objs &lt;- rds[[name]]
##                   lazyLoad(file.path(p, &quot;Rdata&quot;), envir = envir, 
##                     filter = function(x) x %in% objs)
##                   break
##                 }
##                 else if (verbose) 
##                   message(sprintf(&quot;name=%s:\t NOT found in names() of Rdata.rds, i.e.,\n\t%s\n&quot;, 
##                     name, paste(names(rds), collapse = &quot;,&quot;)), 
##                     domain = NA)
##             }
##             if (file_test(&quot;-f&quot;, file.path(p, &quot;Rdata.zip&quot;))) {
##                 warning(&quot;zipped data found for package &quot;, sQuote(basename(dirname(p))), 
##                   &quot;.\nThat is defunct, so please re-install the package.&quot;, 
##                   domain = NA)
##                 if (file_test(&quot;-f&quot;, fp &lt;- file.path(p, &quot;filelist&quot;))) 
##                   files &lt;- file.path(p, scan(fp, what = &quot;&quot;, quiet = TRUE))
##                 else {
##                   warning(gettextf(&quot;file &#39;filelist&#39; is missing for directory %s&quot;, 
##                     sQuote(p)), domain = NA)
##                   next
##                 }
##             }
##             else {
##                 files &lt;- list.files(p, full.names = TRUE)
##             }
##             files &lt;- files[grep(name, files, fixed = TRUE)]
##             if (length(files) &gt; 1L) {
##                 o &lt;- match(fileExt(files), dataExts, nomatch = 100L)
##                 paths0 &lt;- dirname(files)
##                 paths0 &lt;- factor(paths0, levels = unique(paths0))
##                 files &lt;- files[order(paths0, o)]
##             }
##             if (length(files)) {
##                 for (file in files) {
##                   if (verbose) 
##                     message(&quot;name=&quot;, name, &quot;:\t file= ...&quot;, .Platform$file.sep, 
##                       basename(file), &quot;::\t&quot;, appendLF = FALSE, 
##                       domain = NA)
##                   ext &lt;- fileExt(file)
##                   if (basename(file) != paste0(name, &quot;.&quot;, ext)) 
##                     found &lt;- FALSE
##                   else {
##                     found &lt;- TRUE
##                     zfile &lt;- file
##                     zipname &lt;- file.path(dirname(file), &quot;Rdata.zip&quot;)
##                     if (file.exists(zipname)) {
##                       Rdatadir &lt;- tempfile(&quot;Rdata&quot;)
##                       dir.create(Rdatadir, showWarnings = FALSE)
##                       topic &lt;- basename(file)
##                       rc &lt;- .External(C_unzip, zipname, topic, 
##                         Rdatadir, FALSE, TRUE, FALSE, FALSE)
##                       if (rc == 0L) 
##                         zfile &lt;- file.path(Rdatadir, topic)
##                     }
##                     if (zfile != file) 
##                       on.exit(unlink(zfile))
##                     switch(ext, R = , r = {
##                       library(&quot;utils&quot;)
##                       sys.source(zfile, chdir = TRUE, envir = envir)
##                     }, RData = , rdata = , rda = load(zfile, 
##                       envir = envir), TXT = , txt = , tab = , 
##                       tab.gz = , tab.bz2 = , tab.xz = , txt.gz = , 
##                       txt.bz2 = , txt.xz = assign(name, read.table(zfile, 
##                         header = TRUE, as.is = FALSE), envir = envir), 
##                       CSV = , csv = , csv.gz = , csv.bz2 = , 
##                       csv.xz = assign(name, read.table(zfile, 
##                         header = TRUE, sep = &quot;;&quot;, as.is = FALSE), 
##                         envir = envir), found &lt;- FALSE)
##                   }
##                   if (found) 
##                     break
##                 }
##                 if (verbose) 
##                   message(if (!found) 
##                     &quot;*NOT* &quot;, &quot;found&quot;, domain = NA)
##             }
##             if (found) 
##                 break
##         }
##         if (!found) 
##             warning(gettextf(&quot;data set %s not found&quot;, sQuote(name)), 
##                 domain = NA)
##     }
##     invisible(names)
## }
## &lt;bytecode: 0x000000001d30b8f8&gt;
## &lt;environment: namespace:utils&gt;</code></pre>
</div>
<div id="download" class="section level2">
<h2>Download</h2>
<p>The data are deposited in xx public repositories where they can be downloaded. Check on each data repository the policies regarding data use and citation.</p>
<p><img src = "https://osf.io/static/img/circle_logo.png" width = "25"> <a href="DOI%2010.17605/OSF.IO/7D3CH"></a></p>
</div>



Copyright 2018 Mladen Čučak


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
